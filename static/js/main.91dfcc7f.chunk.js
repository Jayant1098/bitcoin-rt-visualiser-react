(this.webpackJsonpbitcoin_price_visualiser=this.webpackJsonpbitcoin_price_visualiser||[]).push([[0],{176:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(12),c=n.n(i),o=(n(79),n(69)),s=n(68),u=n(59),l=n(60),d=n(67),f=n(70),p=n(192),h=n(177),m=n(61);function v(e){return r.a.createElement("div",{style:{width:"85%",paddingTop:"2%"}},r.a.createElement(m.a,{data:{labels:e.hdata.map((function(e){return e.name})),datasets:[{data:e.hdata.map((function(e){return e.Close})),label:"BTC-USD",fill:!1,lineTension:.1,backgroundColor:"rgba(75,192,192,0.4)",borderColor:"rgba(75,192,192,1)",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",pointBorderColor:"rgba(75,192,192,1)",pointBackgroundColor:"#fff",pointBorderWidth:1,pointHoverRadius:5,pointHoverBackgroundColor:"rgba(75,192,192,1)",pointHoverBorderColor:"rgba(220,220,220,1)",pointHoverBorderWidth:2,pointRadius:1,pointHitRadius:10}]}}))}var g=n(191);function b(e){return r.a.createElement("div",{style:{display:"flex",width:"100%","background-color":"#4bc0c0",justifyContent:"flex-end"}},r.a.createElement(g.a,{variant:"h6",style:{margin:"0.7% 1%",color:"#FFF"}},"Last Price :"," ",e.currentPrice?"$"+e.currentPrice:"Fetching Price"))}var D=function(e){Object(f.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={currentPrice:"",timeTicker:!0,hdata:[],view:1},e.dataa=[],e.ws=new WebSocket("wss://ws-feed.pro.coinbase.com"),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.ticker(),this.fetchHistoricData()}},{key:"ticker",value:function(){var e=this;this.ws.onopen=function(){e.ws.send(JSON.stringify({type:"subscribe",product_ids:["BTC-USD"],channels:[{name:"ticker"}]}))},this.ws.onmessage=function(t){var n=JSON.parse(t.data);e.dataa=n},setInterval((function(){return e.setState((function(t){var n=t.hdata;if(!t.timeTicker)return{currentPrice:e.dataa.price};var a=new Date(e.dataa.time),r=a.getHours()+":"+(a.getMinutes()<10?"0"+a.getMinutes():a.getMinutes()),i=Object(s.a)(n).slice(1);return{hdata:[].concat(Object(o.a)(i),[{Close:e.dataa.price,name:r}]),currentPrice:e.dataa.price}}))}),5e3)}},{key:"fetchHistoricData",value:function(){var e=this,t=new Date,n=function(){var n=new Date(t);n.setDate(t.getDate()-1);var a=encodeURIComponent(n.toISOString()),r=encodeURIComponent(t.toISOString()),i="https://api.pro.coinbase.com/products/BTC-USD/candles?start=".concat(a,"&end=").concat(r,"&granularity=").concat(300);fetch(i).then((function(e){return e.json()})).then((function(t){var n=t.map((function(e){var t=new Date(1e3*e[0]);return{name:t.getHours()+":"+(t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes()),Close:e[3]}})).reverse();e.setState({hdata:n})}))},a=function(n){var a=new Date(t);a.setDate(t.getDate()-n);var r=encodeURIComponent(a.toISOString()),i=encodeURIComponent(t.toISOString()),c=n>10?21600:3600,o="https://api.pro.coinbase.com/products/BTC-USD/candles?start=".concat(r,"&end=").concat(i,"&granularity=").concat(c);fetch(o).then((function(e){return e.json()})).then((function(t){var n=t.map((function(e){var t=new Date(1e3*e[0]);return{name:t.getDate()+"/"+t.getMonth()+" "+t.getHours()+":"+(t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes()),Close:e[3]}})).reverse();e.setState({hdata:n})}))};switch(this.state.view){case 24:n();break;case 5:a(5);break;case 10:a(10);break;case 1:fetch("https://api.pro.coinbase.com/products/BTC-USD/candles?granularity=60").then((function(e){return e.json()})).then((function(t){var n=t.map((function(e){var t=new Date(1e3*e[0]);return{name:t.getHours()+":"+(t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes()),Close:e[3]}})).reverse();e.setState({hdata:n})}));break;case 30:a(30);break;default:n()}}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"App",style:k.container},r.a.createElement(b,{currentPrice:this.state.currentPrice}),r.a.createElement(v,{hdata:this.state.hdata}),r.a.createElement("div",null,r.a.createElement(p.a,{color:"secondary","aria-label":"outlined secondary button group",style:{margin:"5%"}},r.a.createElement(h.a,{onClick:function(){return e.setState({view:30},(function(){return e.fetchHistoricData()}))}},"30D"),r.a.createElement(h.a,{onClick:function(){return e.setState({view:10,timeTicker:!1},(function(){return e.fetchHistoricData()}))}},"10D"),r.a.createElement(h.a,{onClick:function(){return e.setState({view:5,timeTicker:!1},(function(){return e.fetchHistoricData()}))}},"5D"),r.a.createElement(h.a,{onClick:function(){return e.setState({view:24,timeTicker:!0},(function(){return e.fetchHistoricData()}))}},"1D"),r.a.createElement(h.a,{onClick:function(){return e.setState({view:1,timeTicker:!0},(function(){return e.fetchHistoricData()}))}},"5hr"))))}}]),n}(r.a.Component),k={paper:{color:"#f50057",width:"25%",padding:"2% 3% 4% 1%"},container:{display:"flex",flex:.7,alignItems:"center","flex-direction":"column"}};c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(D,null)),document.getElementById("root"))},74:function(e,t,n){e.exports=n(176)},79:function(e,t,n){}},[[74,1,2]]]);
//# sourceMappingURL=main.91dfcc7f.chunk.js.map